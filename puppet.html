<!-- <!DOCTYPE html> -->
<html lang="en">
<head>

  <!-- Basic Page Needs –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta charset="utf-8">
    <title>CPA Puppet Archive</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Mobile Specific Metas –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- FONT –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

    <!-- Bootstrap –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.js"></script>
    
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Custom CSS –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- Favicon –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="icon" type="image/png" href="img/favicon.png">

    <script id="images-template" type="x-tmpl-mustache">
        {{#images}}
            <a href="#" data-toggle="modal" data-target="#imageCarousel"><img src={{.}} class="media-object col-md-4"></a>
        {{/images}}
    </script>

    <script id="page-title-template" type="x-tmpl-mustache">
        {{name}}
    </script>

    <script id="info-template" type="x-tmpl-mustache">
        {{#info}}
            <div class="row">
                <span class="col-md-4">{{key}}</span>
                <span class="col-md-8">{{value}}</span>
            </div>
        {{/info}}
    </script>

    <script>
        function urlParam(name) {
            var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
            return results?results[1] : 0;
        };

        var imagesTabTemplate = $('#images-template').html();
        Mustache.parse(imagesTabTemplate);                          // optional, speeds up future uses
        var infoTabTemplate = $('#info-template').html();
        Mustache.parse(infoTabTemplate);                            // optional, speeds up future uses
        var pageTitleTemplate = $('#page-title-template').html();
        Mustache.parse(pageTitleTemplate);                          // optional, speeds up future uses

        function renderImagesTab(puppet){
            var imagesTabRendered = Mustache.render(imagesTabTemplate, puppet);
            $('#images').html(imagesTabRendered);
        };

        function renderInfoTab(puppet){
            var infoTabRendered = Mustache.render(infoTabTemplate, puppet);
            $('#info').html(infoTabRendered);
        };

        function renderPageTitle(puppet){
            var pageTitleRendered = Mustache.render(pageTitleTemplate, puppet);
            $('#page-title').html(pageTitleRendered);
            $('.modal-title').html(pageTitleRendered);
        };

        function render(){
            $.get('data.json', function(puppets) {
                var puppetId = urlParam("puppetId");
                console.log("Index:", puppetId);
                var puppet = puppets[puppetId];
                renderImagesTab(puppet);
                renderInfoTab(puppet);
                renderPageTitle(puppet);
            });
        };

    </script>

</head>
<body onload="render()">
  <!-- HEADER –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12" id ="header">
        <h4>Header</h4>
      </div>
    </div>
  </div>

  <div class="container">    
    <!-- Body –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <div class="row" id ="main-body">
      <div class="col-md-8" id="unity-element">
        <h4>Unity 3D Element</h4>
      </div>
      <div class="col-md-4" id="tabs">

        <h3 id ="page-title"></h3>

        <ul class="nav nav-tabs">
          <li class="active"><a data-toggle="tab" href="#info"><span class="glyphicon glyphicon-list-alt"></span></a></li>
          <li><a data-toggle="tab" href="#images"><span class="glyphicon glyphicon-picture"></span></a></li>
          <li><a data-toggle="tab" href="#videos"><span class="glyphicon glyphicon-facetime-video disabled"></span></a></li>
          <li><a data-toggle="tab" href="#download"><span class="glyphicon glyphicon-download-alt "></span></a></li>
        </ul>

        <div class="tab-content">
          <div id="info" class="tab-pane fade in active"></div>
          <div id="images" class="tab-pane fade"></div>
          <div id="videos" class="tab-pane fade">No videos available for the puppet</div>
          <div id="download" class="tab-pane fade">No downloads available for the puppet</div>
        </div>
      </div>
    </div>
  </div>


  <div id="imageCarousel" class="modal fade" role="dialog">
      <div class="modal-dialog">
    
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Title comes here again</h4>
          </div>
          <div class="modal-body">
              <div id="myCarousel" class="carousel slide" data-ride="carousel">
                  <!-- Wrapper for slides -->
                  <div class="carousel-inner">
                    <div class="item active">
                      <img src="img/img_avatar1.png" style="width:100%;">
                    </div>
              
                    <div class="item">
                      <img src="img/img_avatar1.png" style="width:100%;">
                    </div>
                  
                    <div class="item">
                      <img src="img/img_avatar1.png" style="width:100%;">
                    </div>
                  </div>
              
                  <!-- Left and right controls -->
                  <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="right carousel-control" href="#myCarousel" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>
          </div>
        </div>
    
      </div>
    </div>
    <!-- HEADER –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div id="footer">
    <div class="container">
      <div class="row">
        <a class="col-md-2" href="#">Disclaimer</a>
        <a class="col-md-2" href="mailto:nowhere@mozilla.org">Contact</a>
        <a class="col-md-2" href="http://www.puppet.org/">CPA</a>
        <a class="col-md-2" href="https://www.gatech.edu">Georgia Tech</a>
        <a class="col-md-2" href="https://www.gatech.edu">Georgia Tech</a>
        <a class="col-md-12" href="#">Some long text that spans multiple lines. Some long text that spans multiple lines Some long text that spans multiple lines</a>
      </div>
    </div>
  </div>
</body>
</html>
